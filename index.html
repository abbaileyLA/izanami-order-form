<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Izanami Dinner Order Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; }
    </style>
</head>
<body>
    <div id="app"></div>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState } = React;
        
        const AlertCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
        );
        
        const CheckCircle2 = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="m9 12 2 2 4-4"></path>
            </svg>
        );

        const IzanamiOrderForm = () => {
            const [formData, setFormData] = useState({
                name: '',
                email: '',
                dietary: '',
                selections: [],
                comments: ''
            });
            
            const [submitted, setSubmitted] = useState(false);
            const [submitting, setSubmitting] = useState(false);

            const menuItems = {
                cold: [
                    { id: 'cold1', name: 'Spicy Cucumber + Avocado Salad', desc: 'serrano pepper vinaigrette, marcona almonds, togarashi', gf: true },
                    { id: 'cold2', name: 'Burrata Salad', desc: 'roasted organic autumn vegetables, toasted pistachio + shiso pesto, black garlic reduction', gf: true },
                    { id: 'cold3', name: 'Apple Kimchi Salad', desc: 'house made apple kimchi, crème fraiche, local organic arugula, candied pecans, crispy jamon serrano', gf: true },
                    { id: 'cold4', name: 'Crispy Spicy Tuna', desc: 'crispy sushi rice cakes, spicy tuna, avocado, jalapeño, unagi sauce', gf: false },
                    { id: 'cold5', name: 'Black Sesame Noodles', desc: 'burdock root, carrots, edamame, scallions, house made black sesame dressing', gf: false }
                ],
                raw: [
                    { id: 'raw1', name: 'Sashimi "Ceviche"', desc: 'ahi tuna, ceviche-inspired marinade, kizami wasabi, ginger shoyu sudachi sauce', gf: false },
                    { id: 'raw2', name: 'Assorted Sashimi', desc: 'daikon radish, pickled ginger, smoked shoyu, freshly grated wasabi root', gf: false },
                    { id: 'raw3', name: 'Temaki Hand Rolls', desc: 'two handrolls, ask server for selection', gf: false },
                    { id: 'raw4', name: 'Salmon + Avocado Roll', desc: '', gf: false },
                    { id: 'raw5', name: 'Tekka Maki', desc: 'tuna + shiso', gf: false },
                    { id: 'raw6', name: 'Kampyou', desc: 'sweet gourd + wasabi', gf: false },
                    { id: 'raw7', name: 'Ume + Shiso + Shrimp Roll', desc: '', gf: false },
                    { id: 'raw8', name: 'Kappa Maki', desc: 'cucumber roll', gf: false },
                    { id: 'raw9', name: 'Kani Avocado', desc: 'snow crab + avocado', gf: false },
                    { id: 'raw10', name: 'Negi Hamachi', desc: 'yellow tail + scallions', gf: false }
                ],
                hot: [
                    { id: 'hot1', name: 'Crispy Kurobuta Pork Belly', desc: 'watermelon agridulce, pickled watermelon rind, scallions', gf: false },
                    { id: 'hot2', name: 'Grilled Miso Bass', desc: 'wild chilean sea bass, miso, bok choy, pickled ginger', gf: true },
                    { id: 'hot3', name: 'House-made Skillet Gyoza', desc: 'organic chicken, shiso, scallions, garlic, wakame + dipping sauce (20 min cook time)', gf: false },
                    { id: 'hot4', name: 'Wagyu Short Ribs', desc: 'ancho chile-shoyu braised, parsnip-pear puree, yuzu-shoyu brussels sprouts, vanilla pickled fennel', gf: false },
                    { id: 'hot5', name: 'Seasonal Itame', desc: 'japanese style seasonal vegetables stir fry', gf: true },
                    { id: 'hot6', name: 'Roasted Japanese Mushrooms', desc: 'bean sprouts, tamari, butter, yuzu, shoyu-pickled garlic', gf: true },
                    { id: 'hot7', name: 'Nasu Dengaku', desc: 'organic grilled japanese eggplant, miso, goma seeds', gf: true }
                ],
                grilled: [
                    { id: 'grilled1', name: 'Wagyu Beef Ishiyaki', desc: 'premium beef, cook at table on 500° hot stone, smoked shoyu, sesame miso sauce', gf: false },
                    { id: 'grilled2', name: 'Tako Plate', desc: 'grilled octopus, fingerling potatoes, gochujang aioli, onion escabeche', gf: false },
                    { id: 'grilled3', name: 'Smoked Pork Ribs', desc: 'sweet chile glaze, ginger cabbage slaw, parsley peanut mojo sauce', gf: false },
                    { id: 'grilled4', name: 'Grilled Avocado', desc: 'tamari, lemon, sea salt, wasabi', gf: true }
                ],
                fried: [
                    { id: 'fried1', name: 'Tori no Karaage', desc: 'organic fried chicken, spicy mayo, lemon', gf: true },
                    { id: 'fried2', name: 'Kaki Fry', desc: 'fried oysters, spicy sesame sriracha sauce, yuzu aioli, shiso-pickled red onions', gf: true },
                    { id: 'fried3', name: 'Tempura Cauliflower', desc: 'miso chile sesame sauce, pine nuts, furikake', gf: false },
                    { id: 'fried4', name: 'Renkon Hasami Age', desc: 'lotus root, chicken, garlic shoyu chili sauce', gf: true },
                    { id: 'fried5', name: 'Roasted Beet & Shiso Croquettes', desc: 'house made curry aioli', gf: false },
                    { id: 'fried6', name: 'Brussels Sprouts', desc: 'crispy pork belly, jalapeños, parmesan, candied pecans', gf: true },
                    { id: 'fried7', name: 'Ebi Tempura', desc: 'shrimp tempura + aji amarillo pineapple sweet chile', gf: false }
                ],
                desserts: [
                    { id: 'dessert1', name: 'Hojicha Panna Cotta', desc: 'japanese roasted green tea custard, almond shortbread, black fig compote', gf: true },
                    { id: 'dessert2', name: 'Yuzu Ricotta Cheesecake', desc: 'almond crust, strawberry-yuzu compote, berry paper', gf: true },
                    { id: 'dessert3', name: 'Autumn Pear Tart', desc: 'miso caramel caramelized pears, pastry cream, butter milk ice cream', gf: true },
                    { id: 'dessert4', name: 'Dairy-Free Dessert', desc: 'TBD', gf: true }
                ]
            };

            const handleCheckboxChange = (itemId) => {
                setFormData(prev => {
                    const newSelections = prev.selections.includes(itemId)
                        ? prev.selections.filter(id => id !== itemId)
                        : prev.selections.length < 5
                        ? [...prev.selections, itemId]
                        : prev.selections;
                    
                    return { ...prev, selections: newSelections };
                });
            };

            const getItemName = (itemId) => {
                for (const category of Object.values(menuItems)) {
                    const item = category.find(i => i.id === itemId);
                    if (item) return item.name;
                }
                return itemId;
            };

            const handleSubmit = async () => {
                if (formData.selections.length !== 5) {
                    alert('Please select exactly 5 items');
                    return;
                }
                if (!formData.name || !formData.email) {
                    alert('Please fill in your name and email');
                    return;
                }

                setSubmitting(true);

                try {
                    const selectedItemNames = formData.selections.map(id => getItemName(id));
                    
                    const response = await fetch('https://formspree.io/f/mnngllar', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: formData.name,
                            email: formData.email,
                            dietary_restrictions: formData.dietary,
                            menu_selections: selectedItemNames.join(', '),
                            selection_1: selectedItemNames[0] || '',
                            selection_2: selectedItemNames[1] || '',
                            selection_3: selectedItemNames[2] || '',
                            selection_4: selectedItemNames[3] || '',
                            selection_5: selectedItemNames[4] || '',
                            additional_comments: formData.comments
                        })
                    });

                    if (response.ok) {
                        setSubmitted(true);
                    } else {
                        alert('There was an error submitting your order. Please try again.');
                    }
                } catch (error) {
                    alert('There was an error submitting your order. Please try again.');
                    console.error('Error:', error);
                } finally {
                    setSubmitting(false);
                }
            };

            const selectionCount = formData.selections.length;
            const remaining = 5 - selectionCount;

            if (submitted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8 flex items-center justify-center">
                        <div className="max-w-2xl w-full bg-white rounded-lg shadow-2xl p-12 text-center">
                            <CheckCircle2 className="w-20 h-20 text-green-500 mx-auto mb-6" />
                            <h2 className="text-3xl font-bold text-gray-800 mb-4">Order Submitted!</h2>
                            <p className="text-gray-600 mb-6">Thank you, {formData.name}. Your selections have been received.</p>
                            <div className="bg-gray-50 rounded-lg p-6 mb-6">
                                <h3 className="font-semibold text-gray-800 mb-3">Your Selections:</h3>
                                <ol className="text-left space-y-2">
                                    {formData.selections.map((id, idx) => (
                                        <li key={id} className="text-gray-700">
                                            {idx + 1}. {getItemName(id)}
                                        </li>
                                    ))}
                                </ol>
                            </div>
                            <p className="text-sm text-gray-500">A confirmation has been sent to {formData.email}</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-8">
                    <div className="max-w-4xl mx-auto bg-white rounded-lg shadow-2xl overflow-hidden">
                        <div className="p-8 text-white text-center" style={{backgroundColor: '#aace98'}}>
                            <h1 className="text-4xl font-bold mb-2">IZANAMI DINNER</h1>
                            <p className="text-emerald-50 text-xl mb-3">Wednesday, November 12th</p>
                            <p className="text-emerald-50 text-lg mb-4">Select 5 À La Carte Menu Items</p>
                            <p className="text-sm text-emerald-50 max-w-2xl mx-auto leading-relaxed">Please select exactly 5 items from any of the sections below for your dining experience. Your selections will help us prepare for an amazing evening of Japanese-inspired cuisine.</p>
                        </div>

                        <div className="sticky top-0 bg-white border-b-2 border-gray-200 p-4 shadow-md z-10">
                            <div className="flex items-center justify-between max-w-4xl mx-auto">
                                <div className="flex items-center gap-2">
                                    {remaining > 0 ? (
                                        <AlertCircle className="w-5 h-5 text-amber-500" />
                                    ) : (
                                        <CheckCircle2 className="w-5 h-5 text-green-500" />
                                    )}
                                    <span className="font-semibold text-lg">
                                        {selectionCount} / 5 items selected
                                    </span>
                                </div>
                                <span className={`text-sm font-medium ${remaining === 0 ? 'text-green-600' : 'text-gray-600'}`}>
                                    {remaining > 0 ? `${remaining} remaining` : 'All items selected!'}
                                </span>
                            </div>
                        </div>

                        <div className="p-8">
                            <div className="mb-8 space-y-4">
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">Guest Information</h2>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                                    <input
                                        type="text"
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-400 focus:border-transparent"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Email Address *</label>
                                    <input
                                        type="email"
                                        value={formData.email}
                                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-400 focus:border-transparent"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Dietary Restrictions or Allergies</label>
                                    <input
                                        type="text"
                                        value={formData.dietary}
                                        onChange={(e) => setFormData({...formData, dietary: e.target.value})}
                                        placeholder="Please list any dietary restrictions or allergies"
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-400 focus:border-transparent"
                                    />
                                </div>
                            </div>

                            {Object.entries(menuItems).map(([category, items]) => (
                                <div key={category} className="mb-8">
                                    <h2 className="text-2xl font-bold mb-4 capitalize border-b-2 pb-2" style={{color: '#44624a', borderColor: '#44624a'}}>
                                        {category === 'raw' ? 'Raw Bar' : category === 'hot' ? 'Hot Dishes' : category === 'grilled' ? 'Grilled Items' : category === 'fried' ? 'Fried Items' : category}
                                    </h2>
                                    <div className="space-y-3">
                                        {items.map(item => (
                                            <label
                                                key={item.id}
                                                className={`flex items-start p-4 border-2 rounded-lg cursor-pointer transition-all ${
                                                    formData.selections.includes(item.id)
                                                        ? 'bg-opacity-20'
                                                        : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50'
                                                } ${selectionCount >= 5 && !formData.selections.includes(item.id) ? 'opacity-50 cursor-not-allowed' : ''}`}
                                                style={formData.selections.includes(item.id) ? {
                                                    borderColor: '#aace98',
                                                    backgroundColor: '#aace9833'
                                                } : {}}
                                            >
                                                <input
                                                    type="checkbox"
                                                    checked={formData.selections.includes(item.id)}
                                                    onChange={() => handleCheckboxChange(item.id)}
                                                    disabled={selectionCount >= 5 && !formData.selections.includes(item.id)}
                                                    className="mt-1 h-5 w-5 text-teal-500 rounded focus:ring-teal-400"
                                                />
                                                <div className="ml-3 flex-1">
                                                    <div className="flex items-center gap-2">
                                                        <span className="font-semibold text-gray-900">{item.name}</span>
                                                        {item.gf && (
                                                            <span className="text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded">GF</span>
                                                        )}
                                                    </div>
                                                    {item.desc && (
                                                        <p className="text-sm text-gray-600 mt-1">{item.desc}</p>
                                                    )}
                                                </div>
                                            </label>
                                        ))}
                                    </div>
                                </div>
                            ))}

                            <div className="mb-8">
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Additional Comments or Special Requests
                                </label>
                                <textarea
                                    value={formData.comments}
                                    onChange={(e) => setFormData({...formData, comments: e.target.value})}
                                    rows="4"
                                    placeholder="Any special requests or additional dietary needs?"
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-400 focus:border-transparent"
                                />
                            </div>

                            <button
                                type="button"
                                onClick={handleSubmit}
                                disabled={selectionCount !== 5 || submitting}
                                className={`w-full py-4 px-6 rounded-lg font-semibold text-lg transition-all ${
                                    selectionCount === 5 && !submitting
                                        ? 'bg-gradient-to-r from-emerald-600 to-teal-500 text-white hover:from-emerald-500 hover:to-teal-400 shadow-lg hover:shadow-xl'
                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                }`}
                            >
                                {submitting ? 'Submitting...' : selectionCount === 5 ? 'Submit Order' : `Select ${remaining} more item${remaining !== 1 ? 's' : ''} to submit`}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<IzanamiOrderForm />, document.getElementById('app'));
    </script>
</body>
</html>
